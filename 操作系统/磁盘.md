#### 磁盘

磁盘由盘片，在磁臂上的读写磁头随着磁臂而移动。

磁盘表面划分为磁道，一个磁道按照大小划分为512kb的扇区。

同一磁道位置的磁道组合成了扇区。



定位时间：

寻道时间（移动磁臂到所需柱面的时间） + 旋转延迟（旋转磁臂到所需扇的时间）



从扇区编号映射到磁盘：先从磁道内扇区，再柱面内磁道，再从外向内的柱面顺序。

#### noop 

linux noop是先来先服务原则。

但是加上了相邻块请求的合并。

100(101)，500，10，56，1000

比方说对于扇区100， 600， 101， 10， 56， 1000.



- 容易饿死读请求

- 写请求通过文件系统cache，不需要等一次写完成，就能进行下一次写操作。

  写请求通过合并，堆积到io队列中；二读请求需要等到前面的读操作完成，才能执行。



#### CFQ

CFQ对进程分配一个时间片，进程在把时间片分给底层。当时间片消耗完，进程的请求队列将被挂起，等待调度。

- 倾向公平分配I / O，不适合数据库应用
- CFQ会对队列进行排序和merge

#### 固态磁盘

- 固态磁盘没有磁头来回移动，随机读取和顺序读取效率一样

对于固态磁盘SSD，IO调度算法越复杂效率越低，因此固态磁盘使用noop

https://www.cnblogs.com/kongzhongqijing/articles/5786002.html

#### 预读

对于操作系统Page Cache主要用来缓存4K大小页面。

- 同步预读，会一个页面读取请求会读取好几个页面（一般为3）
- 异步：如果第二次所读页面没有命中，则说明不是顺序访问，会把会把预读大小扩大一步。

https://tech.meituan.com/2017/05/19/about-desk-io.html

