#### 协程和线程

- 协程栈大小小，只有几kb；线程栈通常为10 m左右
- 协程切换在用户态，线程切换需要在内核态。
- 线程和协程的资源不同，线程包括cpu资源，io资源，定时器资源。
- go创建数量等于操作系统核心数量的线程，让它们一直运行，减少切换损耗；而协程就竞争线程。
- 不同进程切换需要刷新TLB，系统缺页中断开销
- 线程切换使用相同的task struct，开销更小。





进程是操作系统分配资源的一个单位。

而线程共享该进程的资源，只是每个线程有自己的栈。

